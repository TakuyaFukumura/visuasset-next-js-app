# 機能追加案

## 概要

visuasset-next-js-app（資産可視化アプリ）に対する機能追加案をまとめた資料です。

---

## 1. 目標年の設定と進捗表示

### 概要

ユーザーが資産目標（例：「2030年までに総資産3,000万円」）を設定し、現在の資産推移に対して目標達成の見込みを可視化する機能。

### 詳細

- 目標年・目標金額を入力する UI を追加
- 資産推移グラフ上に目標ラインを重ねて表示
- 現在のペースで目標達成可能かどうかを簡易判定してメッセージ表示

### メリット

- モチベーション維持につながる
- 資産形成の進捗を直感的に把握できる

---

## 2. 月次データの対応

### 概要

現在は年次データのみ対応しているが、月次（monthly）データも取り込めるようにする。

### 詳細

- `assets.csv` のフォーマットに月次モード（`year,month,stocks,cash,crypto`）を追加
- 年次／月次を切り替えて表示できる UI を追加
- グラフ・テーブルともに月次表示に対応

### メリット

- より細かい粒度で資産推移を確認できる
- 月単位の増減を把握しやすくなる

---

## 3. 資産ジャンルのカスタマイズ

### 概要

現在は「株式・現預金・暗号資産」の 3 ジャンル固定だが、ユーザーが自由にジャンルを追加・編集・削除できるようにする。

### 詳細

- ジャンル名・色を管理する設定画面の追加
- CSV フォーマットの列名とジャンル定義を動的に紐付ける仕組みの導入
- ジャンル定義は `localStorage` またはサーバー側のファイルに保存

### メリット

- 不動産・債券・保険など多様な資産ジャンルに対応可能
- アプリの汎用性が向上する

---

## 4. CSV ファイルのアップロード機能

### 概要

現在は `data/assets.csv` をサーバー側に直接配置する必要があるが、UI 上から CSV ファイルをアップロードして反映できるようにする。

### 詳細

- ファイルアップロード用の UI コンポーネントを追加
- アップロードされた CSV をパースしてグラフ・テーブルに反映
- バリデーションエラー（フォーマット不正など）を分かりやすく表示

### メリット

- 非エンジニアでも容易にデータを更新できる
- サーバーへの直接アクセス不要でデータ管理が楽になる

---

## 5. 資産推移の折れ線グラフ表示

### 概要

現在の積み上げ棒グラフに加え、合計資産額の推移を折れ線グラフでも確認できるようにする。

### 詳細

- グラフ種別（棒グラフ／折れ線グラフ）を切り替えるボタンを追加
- Recharts の `LineChart` を利用して合計資産額の推移を可視化
- 各ジャンルの折れ線表示も選択可能にする

### メリット

- トレンドの把握がしやすくなる
- 異なる視点からデータを分析できる

---

## 6. データのエクスポート機能

### 概要

表示中のグラフや資産データを PNG / CSV 形式でダウンロードできる機能。

### 詳細

- グラフ画像（PNG）のダウンロードボタンを追加（`html2canvas` 等を活用）
- 現在表示しているテーブルデータを CSV としてダウンロードするボタンを追加

### メリット

- レポート作成や他ツールへのデータ連携が容易になる
- 記録・振り返りに活用できる

---

## 7. 前年比・増減表示

### 概要

資産推移テーブルに前年比（増減額・増減率）の列を追加し、年ごとの変化を一目で確認できるようにする。

### 詳細

- `AssetTable` コンポーネントに前年比列（増減額・増減率）を追加
- プラスは緑色、マイナスは赤色で色分け表示

### メリット

- 各年の資産増減を直感的に把握できる
- 投資判断や振り返りに役立つ

---

## 優先度まとめ

| # | 機能名 | 優先度 | 実装難易度 |
|---|--------|--------|------------|
| 1 | 目標年の設定と進捗表示 | 高 | 中 |
| 2 | 月次データの対応 | 中 | 中 |
| 3 | 資産ジャンルのカスタマイズ | 中 | 高 |
| 4 | CSV ファイルのアップロード機能 | 高 | 中 |
| 5 | 資産推移の折れ線グラフ表示 | 中 | 低 |
| 6 | データのエクスポート機能 | 低 | 低 |
| 7 | 前年比・増減表示 | 高 | 低 |
