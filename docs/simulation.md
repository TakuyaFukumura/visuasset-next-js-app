# 資産推移シミュレーション機能仕様書

## 概要

直近の資産データを起点として、将来の資産推移を予測する機能です。
利回り・インフレ率・月々の積立額を設定し、名目資産額とインフレ調整後の実質価値を折れ線グラフで表示します。

---

## 画面構成

### URL

`/simulation`

### 表示内容

1. **設定パネル**: シミュレーション条件を入力するフォーム
2. **折れ線グラフ**: 2本の折れ線（名目資産額・実質価値）を表示
3. **注記**: シミュレーションの前提条件・免責事項

---

## 設定項目

| 項目 | 単位 | デフォルト値 | 説明 |
|------|------|------------|------|
| 利回り | % | 5 | 株式資産に適用される年間運用利回り |
| インフレ率 | % | 2 | 物価上昇率。実質価値の計算に使用 |
| 月々の積立額 | 万円 | 0 | 毎月追加で投資に回す金額 |
| シミュレーション期間 | 年 | 30 | 現在から何年後まで予測するか |

---

## シミュレーション計算ロジック

### 前提

- 直近年の資産データ（株式・現預金・暗号資産）を初期値とする
- 運用利回りは**株式資産にのみ**適用する
- 月々の積立額は株式として運用する（利回りを適用）
- 現預金・暗号資産は金額変化なし（利回りを適用しない）

### 計算式

#### n 年後の株式資産額

```
月利 = 利回り / 12 / 100

【月利 > 0 の場合】
株式_n = 初期株式 × (1 + 年利)^n
         + 月々の積立額 × ((1 + 月利)^(12n) - 1) / 月利

【月利 = 0 の場合】
株式_n = 初期株式 + 月々の積立額 × 12 × n
```

#### n 年後の名目資産額（合計）

```
名目資産額_n = 株式_n + 現預金_0 + 暗号資産_0
```

#### n 年後のインフレ調整後実質価値

```
実質価値_n = 名目資産額_n / (1 + インフレ率 / 100)^n
```

> インフレ調整後実質価値は、将来の金額を現在の貨幣価値に換算したものです。
> 例: インフレ率 2%、30 年後に 4,000 万円 → 実質価値 ≒ 2,207 万円

---

## グラフ仕様

| 項目 | 内容 |
|------|------|
| グラフ種別 | 折れ線グラフ（LineChart） |
| X 軸 | 年（開始年〜開始年 + シミュレーション期間） |
| Y 軸 | 資産額（万円） |
| 折れ線 1 | 名目資産額（青色） |
| 折れ線 2 | インフレ調整後実質価値（橙色） |
| ツールチップ | ホバー時に各年の数値を表示 |
| 凡例 | グラフ下部に表示 |

---

## ナビゲーション

ヘッダーのナビゲーションに「資産シミュレーション」リンクを追加し、`/simulation` へ遷移できるようにします。

---

## 免責事項

- このシミュレーションは参考値であり、将来の資産を保証するものではありません。
- 計算には単純な複利計算を使用しており、税金・手数料等は考慮していません。
- 運用利回りは一定とみなして計算しています。
