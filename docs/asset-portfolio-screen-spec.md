# 資産ポートフォリオ画面 仕様書

## 概要

年別の資産ポートフォリオ画面を追加する。  
指定した年の資産割合を円グラフおよび一覧表で確認できる画面。

---

## 画面レイアウト

```
+---------------------------------------------------+
|                                                   |
|           ←  2024年  →                           |
|                                                   |
|   +-------------------------------------------+  |
|   |  [円グラフ（ポートフォリオ）]              |  |
|   +-------------------------------------------+  |
|                                                   |
|   +-------------------------------------------+  |
|   |  資産割合一覧表                            |  |
|   | ジャンル | 金額（万円） | 割合（%）        |  |
|   | 株式     | 220          | 37.3             |  |
|   | 現預金   | 260          | 44.1             |  |
|   | 暗号資産 | 100          | 16.9             |  |
|   | -----    | -----        | -----            |  |
|   | 合計     | 580          | 100.0            |  |
|   +-------------------------------------------+  |
|                                                   |
+---------------------------------------------------+
```

---

## 機能仕様

### 年ナビゲーション

- 画面上部中央に現在表示中の年を `YYYY年` 形式で表示する
- 年表示の左側に `←` ボタンを配置し、クリックすると1年前のデータに切り替える
- 年表示の右側に `→` ボタンを配置し、クリックすると1年後のデータに切り替える
- データが存在しない年（最古年より前・最新年より後）では、対応する矢印ボタンを非活性（disabled）にする

### 円グラフ（ポートフォリオ）

- 選択中の年の資産構成をRecharts の `PieChart` を使って円グラフで表示する
- 各ジャンル（株式・現預金・暗号資産）を色分けして表示する
- グラフにはラベルまたは凡例でジャンル名と割合（%）を表示する

### 資産割合一覧表

- 選択中の年の各資産ジャンルについて、以下の情報を表示する
  - ジャンル名
  - 金額（万円）
  - 割合（%）：小数点第1位まで表示
- 最終行に合計行を表示する

---

## URLルーティング

| パス                     | 説明                                   |
|--------------------------|----------------------------------------|
| `/portfolio`             | 最新年のポートフォリオ画面を表示       |
| `/portfolio?year=2024`   | クエリパラメータで表示年を指定（任意） |

---

## データソース

既存の `data/assets.csv` を使用する。

```csv
year,stocks,cash,crypto
2020,100,200,50
2021,150,220,80
2022,180,210,60
2023,200,250,90
2024,220,260,100
```

---

## コンポーネント構成（案）

```
src/app/portfolio/
└── page.tsx                     # 資産ポートフォリオページ

src/app/components/
├── PortfolioChart.tsx            # 円グラフコンポーネント
└── PortfolioTable.tsx            # 資産割合一覧表コンポーネント
```

---

## 既存画面との違い

| 項目           | 資産推移画面（既存）         | 資産ポートフォリオ画面（新規） |
|----------------|------------------------------|-------------------------------|
| 表示単位       | 全年度の推移                 | 1年ごとのスナップショット      |
| グラフ種別     | 積み上げ棒グラフ             | 円グラフ                       |
| テーブル内容   | 年ごとの金額                 | 年ごとの金額と割合（%）        |
| ナビゲーション | なし                         | 年の前後移動ボタン             |

---

## ダークモード対応

- 既存の `DarkModeProvider` を利用し、ライト・ダーク両モードに対応する

---

## 今後の検討事項

- 年ナビゲーションにアニメーション（スライドトランジション）を加えるかどうか
- 円グラフのホバー時にツールチップで詳細情報を表示するかどうか
- ヘッダーのナビゲーションに「ポートフォリオ」リンクを追加するかどうか
